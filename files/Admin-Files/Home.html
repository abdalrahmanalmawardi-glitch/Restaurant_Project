<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>DashBord</title>

        <style>

            *{
                padding: 0;
                margin: 0;
            }

            *::selection{
                background-color: #fff;
                color: #000;
            }

            .father{
                height: 100vh;
                position: relative;
                background: #292929;
                overflow: hidden;
                display: flex;
                align-items: center;
                justify-content: space-between;
            }

            .menu{
                height: 100vh;
                border-right: #fff7 solid 2px;
                width: 250px ;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: start;
            }

            .menu h1{
                height: 50px;
                width: 100%;
                letter-spacing: 2px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #fff;
                border-bottom: #fff7 solid 2px;
            }

            .menu div{
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 100%;
                justify-content: start;
                padding: 10px;
            }

            .menu div button{
                height: 40px;
                width: 200px;
                margin: 5px 0;
                border-radius: 10px;
                cursor: pointer;
                background-color: #e1f2;
                border: none;
                color: #fff;
                font-weight: bold;
                transition: .5s;
                font-size:15px;
            }

            .menu div button:hover{
                transform: scale(105%);
                background-color: #aaf2;
            }

            .all{
                height: 100%;
                width: calc(100vw - 250px);
            }

            .all h1{
                height: 50px;
                width: 100%;
                letter-spacing: 2px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #fff;
                border-bottom: #fff7 solid 2px;
                font-family: monospace;
            }

            .all table{
                height: calc(100% - 50px);
                width: 100%;
                background-color: #7e7e7e3a;
                display: flex;
                overflow-y: scroll;
                align-items: center;
                justify-content: start;
                flex-direction: column;
            }

            .div{
                width: 100%;
                min-height: 50px;
                display: flex;
                align-items: center;
            }

            .p{
                color: #fb80ff;
                border: #ffffff solid 2px;
                height: 100%;
                width: 20%;
                display: flex;
                align-items: center;
                justify-content: center;
                word-break: break-all;
                font-size: 22px;
                letter-spacing: 1px;
            }

            .id{
                color: #0f0;

            }

            .delete{
                color: #f00;
                cursor: pointer;
                transition: .3s;
            }

            .delete:hover{
                letter-spacing: 2px;
            }

            .f p{
                color : #fff ;
            }

        </style>

    </head>
    <body>

        <!--?  This Page is { Admin DashBord }  -->
        <div class="father" >

            <div class="menu" >

                <h1> Services </h1>

                <div>

                    <button onclick="GetAllUsers()" >All Users</button>

                    <button onclick="GetAllOrders()" >All Orders</button>

                </div>

            </div>

            <div class="all" >

                <h1 id="title" ></h1>

                <table id="tabel" >
                    
                    

                </table>

            </div>

        </div>

    </body>

    <script>

        function deleteUser(Name,Email,PassWord) {
        
            const myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");

            const raw = JSON.stringify({"UName":Name,"UEmail":Email,"UPassWord":PassWord});
            
            const requestOptions = {
            method: "POST",
            headers: myHeaders,
            body: raw,
            redirect: "follow"
            };

            fetch("/Admin/Delete/AnUser", requestOptions)
            .then((response) => response.text())
            .then((result) => {
                GetAllUsers()
            })
            .catch((error) => console.error(error));
        }

        const title = document.getElementById("title")
        const tabel = document.getElementById("tabel")

        function GetAllUsers() {
            
            const myHeaders = new Headers();
            

            const requestOptions = {
            method: "POST",
            headers: myHeaders,
            redirect: "follow"
            };

            fetch("/Admin/Get/Users", requestOptions)
            .then((response) => response.text())
            .then((result) => {
                
                title.innerHTML = "Get All Users" ;

                tabel.innerHTML = `
                <div class="div f" >
                    <p class="p" >ID</p>
                    <p class="p" >Name</p>
                    <p class="p" >Email</p>
                    <p class="p" >PassWord</p>
                    <p class="p" >Delete</p>
                </div>
                `
                Tresult = JSON.parse(result) 
                

                for (let index = 1; index < Tresult.length; index++) {
                    
                    
                    tabel.innerHTML += `
                        <div class="div" >
                            <p class="id p" >${index}</p>
                            <p class="p" >${Tresult[index].Name}</p>
                            <p class="p" >${Tresult[index].Email}</p>
                            <p class="p" >${Tresult[index].Password}</p>
                            <p class="delete p" onclick="deleteUser('${Tresult[index].Name}','${Tresult[index].Email}','${Tresult[index].Password}')" >Click</p>
                        </div>
                    `
                    
                }

            })
            .catch((error) => console.error(error));


        }

        GetAllUsers();

        
        function DeleteAnOrder(A,B,C) {
            const myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");

            const raw = JSON.stringify({"UPropirte":{"Name":A,"Email":B,"Password":C}});

            const requestOptions = {
            method: "POST",
            headers: myHeaders,
            body: raw,
            redirect: "follow"
            };
            console.log("SS");
            
            fetch("/Admin/Delete/AnOrder", requestOptions)
            .then((response) => response.text())
            .then((result) => {
                console.log("DD");
                
                GetAllOrders()
            })
            .catch((error) => console.error(error));
        }
        

        function GetAllOrders() {
                        
            const myHeaders = new Headers();
            
            
            const requestOptions = {
            method: "POST",
            headers: myHeaders,
            redirect: "follow"
            };

            fetch("/Admin/Get/Orders", requestOptions)
            .then((response) => response.text())
            .then((result) => {
                title.innerHTML = "Get All Orders" ;

                tabel.innerHTML = `
                <div class="div f" >
                    <p class="p" >Order</p>
                    <p class="p" >Name</p>
                    <p class="p" >Email</p>
                    <p class="p" >PassWord</p>
                    <p class="p" >Delete</p>
                </div>
                `
                Tresult = JSON.parse(result) 
                

                for (let index = 0; index < Tresult.length; index++) {
                    
                    
                    tabel.innerHTML += `
                        <div class="div" >
                            <p class="p" >${Tresult[index].Orders}</p>
                            <p class="p" >${Tresult[index].User.Name}</p>
                            <p class="p" >${Tresult[index].User.Email}</p>
                            <p class="p" >${Tresult[index].User.Password}</p>
                            <p class="delete p" onclick="DeleteAnOrder('${Tresult[index].User.Name}','${Tresult[index].User.Email}','${Tresult[index].User.Password}')" >Click</p>
                        </div>
                    `
                    
                }
            })
            .catch((error) => console.error(error));

        }

    </script>

</html>